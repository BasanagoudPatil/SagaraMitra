<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Home - SagaraMitra</title>
</head>
<body>

<h2>Welcome to SagaraMitra!</h2>

<form id="logoutForm">
    <button type="submit">Logout</button>
</form>

<script>
    document.getElementById("logoutForm").addEventListener("submit", function(event) {
        event.preventDefault(); // prevent normal form submit

        fetch("/users/logout", {
            method: "POST"
        })
        .then(response => response.text())
        .then(data => {
            if (data === "success" || data.includes("Logged out")) {
                // Redirect to index.html
                window.location.href = "/index.html";
                alert("Logout successful.");
            } else {
                alert("Logout failed.");
            }
        })
        .catch(error => {
            console.error("Logout error:", error);
            alert("Logout request failed.");
        });
    });
</script>

</body>
</html>
